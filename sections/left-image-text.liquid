{% liquid
  assign section_id = section.settings.custom_id | default: section.id
  assign has_button = section.settings.show_button
  assign button_style = section.settings.button_style | default: 'solid'
  assign button_target = section.settings.button_link_target | default: '_self'
  assign image_position = section.settings.image_position | default: 'left'
  if section.settings.button_label == blank or section.settings.button_link == blank
    assign has_button = false
  endif
%}

<section
  id="{{ section_id }}"
  class="relative"
  style="
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
  "
>
  <div class="container mx-auto px-4">
    <div class="flex flex-col gap-10 lg:flex-row lg:items-center {% if image_position == 'right' %}lg:flex-row-reverse{% endif %}">
      <div class="w-full lg:w-1/2">
        {% if section.settings.image != blank %}
          <div class="overflow-hidden rounded-[28px] bg-slate-100 shadow-lg shadow-slate-900/5 transition duration-500 lg:hover:-translate-y-1 lg:hover:shadow-2xl">
            {{
              section.settings.image
              | image_url: width: 1600
              | image_tag:
                loading: 'lazy',
                decoding: 'async',
                sizes: '(max-width: 1024px) 100vw, 50vw',
                class: 'w-full h-full object-cover',
                alt: section.settings.image_alt
              | default: section.settings.title
              | escape
            }}
          </div>
        {% endif %}
      </div>

      <div class="w-full lg:w-1/2 flex flex-col gap-6">
        {% if section.settings.title != blank %}
          <h2 class="text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground leading-tight">
            {{ section.settings.title | escape }}
          </h2>
        {% endif %}

        {% if section.settings.description != blank %}
          <div class="text-base md:text-lg text-foreground/70 leading-relaxed">
            {{ section.settings.description }}
          </div>
        {% endif %}

        {% if section.blocks.size > 0 %}
          <div class="mt-4 grid grid-cols-1 gap-1">
            {% for block in section.blocks %}
              {% if block.type == 'benefit' %}
                <div class="border-b border-neutral-200 pb-6 mb-6 last:mb-0" {{ block.shopify_attributes }}>
                  {% if block.settings.image_icon != blank %}
                    <div class="mb-4 size-8">
                      {% render 'image', image: block.settings.image_icon, class: 'w-full h-full object-cover' %}
                    </div>
                  {% endif %}

                  {% if block.settings.title != blank %}
                    <div class="text-base font-[550]">
                      {{ block.settings.title | escape }}
                    </div>
                  {% endif %}

                  {% if block.settings.description != blank %}
                    <div class="text-base text-foreground-secondary">
                      {{ block.settings.description }}
                    </div>
                  {% endif %}
                </div>
              {% endif %}
            {% endfor %}
          </div>
        {% endif %}

        {% if has_button %}
          <div>
            <a
              href="{{ section.settings.button_link }}"
              class="inline-flex items-center justify-center rounded-full px-8 py-3.5 text-sm font-semibold tracking-wide transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-foreground {% if button_style == 'outline' %}border border-foreground text-foreground hover:bg-foreground hover:text-background{% else %}bg-foreground text-background hover:bg-slate-900{% endif %}"
              {% if button_target == '_blank' %}
                target="_blank" rel="noopener noreferrer"
              {% endif %}
            >
              {{ section.settings.button_label | escape }}
            </a>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Image and Text",
  "tag": "section",
  "class": "section-image-text",
  "settings": [
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top",
      "min": 0,
      "max": 100,
      "unit": "px",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom",
      "min": 0,
      "max": 100,
      "unit": "px",
      "default": 60
    },
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "image_alt",
      "label": "Image alt text",
      "default": "Image alt text"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Image position",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Stunning feature title"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Share a short description that explains why this feature matters.</p>"
    },
    {
      "type": "checkbox",
      "id": "show_button",
      "label": "Show button",
      "default": true
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button label",
      "default": "Learn more"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "Button style",
      "options": [
        { "value": "solid", "label": "Solid" },
        { "value": "outline", "label": "Outline" }
      ],
      "default": "solid"
    },
    {
      "type": "select",
      "id": "button_link_target",
      "label": "Button link target",
      "options": [
        { "value": "_self", "label": "Same tab" },
        { "value": "_blank", "label": "New tab" }
      ],
      "default": "_self"
    }
  ],
  "max_blocks": 6,
  "blocks": [
    {
      "type": "benefit",
      "name": "Benefit",
      "settings": [
        {
          "type": "image_picker",
          "id": "image_icon",
          "label": "Icon"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Image and Text",
      "category": "Generic"
    }
  ]
}
{% endschema %}
