{% liquid
  assign section_id = section.settings.custom_id | default: section.id
%}

<section
  id="{{ section_id }}"
  class="three-column-highlight relative py-16 bg-product-bg-secondary"
>
  <div class="container mx-auto px-4">
    {% if section.settings.heading != blank or section.settings.description != blank %}
      <div class="mx-auto max-w-3xl text-center">
        {% if section.settings.heading != blank %}
          <h2 class="text-3xl font-semibold text-slate-900">
            {{ section.settings.heading | escape }}
          </h2>
        {% endif %}
        {% if section.settings.description != blank %}
          <p class="mt-3 text-base text-slate-600">
            {{ section.settings.description | escape }}
          </p>
        {% endif %}
      </div>
    {% endif %}

    {% if section.blocks != empty %}
      <div class="mt-12 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {% for block in section.blocks %}
          <article
            class="flex flex-col items-center gap-4 rounded-3xl border border-slate-100 bg-white p-7 text-center"
            {{ block.shopify_attributes }}
          >
            <div class="flex h-32 w-32 items-center justify-center rounded-full border border-slate-200 bg-slate-50 p-1 sm:h-36 sm:w-36">
              {% if block.settings.image %}
                {% assign image_alt = block.settings.title | default: '' | escape %}
                {{
                  block.settings.image
                  | image_url: width: 840, height: 840, crop: 'center'
                  | image_tag: class: 'h-full w-full rounded-full object-cover', alt: image_alt, loading: 'lazy'
                }}
              {% else %}
                <div class="h-full w-full rounded-full bg-slate-100"></div>
              {% endif %}
            </div>

            {% if block.settings.title != blank %}
              <h3 class="text-lg font-semibold text-slate-900">
                {{ block.settings.title | escape }}
              </h3>
            {% endif %}

            {% if block.settings.description != blank %}
              <p class="text-sm leading-relaxed text-slate-600">
                {{ block.settings.description | escape }}
              </p>
            {% endif %}
          </article>
        {% endfor %}
      </div>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Three Column Highlight",
  "tag": "section",
  "class": "three-column-highlight",
  "max_blocks": 3,
  "settings": [
    {
      "type": "text",
      "id": "custom_id",
      "label": "Custom ID"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description"
    }
  ],
  "blocks": [
    {
      "type": "column",
      "name": "Column",
      "limit": 3,
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Three Column Images",
      "category": "Layout",
      "blocks": [{ "type": "column" }, { "type": "column" }, { "type": "column" }]
    }
  ]
}
{% endschema %}
