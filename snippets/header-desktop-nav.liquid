{% liquid
  echo customer.first_name
  echo customer.last_name
  echo customer.email
%}

<mega-menu
  class="bg-white border-b border-black/12 h-16"
  role="navigation"
  data-mega-menu-root
>
  <div class="container grid grid-cols-[1fr_auto_1fr] items-center justify-center py-2 px-3 relative h-16">
    <div class="flex gap-2" data-desktop-menu data-mega-menu-triggers>
      {% if shop_menu and shop_menu.links.size > 0 %}
        {% for link in shop_menu.links %}
          <a
            href="{{ link.url }}"
            class="block relative py-1 px-3 no-underline text-primary hover:bg-neutral-100 rounded-full"
            {% if link.type == 'collection_link' %}
              data-mega-menu-trigger
              data-collection-handle="{{ link.object.handle }}"
              aria-haspopup="true"
              aria-expanded="false"
            {% endif %}
          >
            {{ link.title }}
          </a>
        {% endfor %}
      {% endif %}
    </div>

    <a href="{{ routes.root_url }}" aria-label="{{ shop.name | escape }}" class="[&>svg]:h-10 [&>svg]:w-auto">
      {{ 'logo-full.svg' | inline_asset_content }}
    </a>

    <div class="flex items-center gap-2 justify-end">
      {% if marketing_menu and marketing_menu.links.size > 0 %}
        {% for link in marketing_menu.links %}
          <a
            href="{{ link.url }}"
            class="block relative py-1 px-3 no-underline text-primary hover:bg-neutral-100 rounded-full"
          >
            {{ link.title }}
          </a>
        {% endfor %}
      {% endif %}
      <a
        href="account"
        aria-label="User"
        class="flex items-center justify-center size-9 [&>svg]:size-6 rounded-full hover:bg-neutral-100"
      >
        {{ 'icon-account.svg' | inline_asset_content }}
      </a>
      <a
        href="{{ routes.cart_url }}"
        aria-label="Cart"
        aria-haspopup="drawer"
        id="cart-icon-bubble"
        class="flex items-center justify-center size-9 [&>svg]:size-6 rounded-full hover:bg-neutral-100"
      >
        {{ 'icon-cart.svg' | inline_asset_content }}
      </a>
    </div>
  </div>

  <div data-mega-menu-panels>
    {% render 'header-mega-menu-cosmetics', cosmetics_menu: cosmetics_menu %}

    {% render 'header-mega-menu-supplements', supplements_menu: supplements_menu %}
  </div>
</mega-menu>

{% stylesheet %}
  [data-mega-menu-root] {
    position: relative;
  }

  .mega-menu-panel {
    z-index: 9999;
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 200ms ease, transform 220ms ease;
  }

  .mega-menu-panel[data-state='open'] {
    opacity: 1;
    transform: translateY(0);
  }

  .mega-menu-card {
    width: 100%;
    transition: box-shadow 200ms ease;
  }

  .mega-menu-card:hover {
    box-shadow: 0 18px 40px -18px rgba(0, 0, 0, 0.25);
  }

  [data-mega-menu-trigger].is-active {
    background-color: rgba(0, 0, 0, 0.04);
  }

  [data-mega-menu-trigger]:hover {
    text-decoration: none;
  }
{% endstylesheet %}
