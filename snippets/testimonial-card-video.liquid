{% liquid
  assign product_obj = entry.product.value | default: entry.product

  capture product_theme_class
    render 'product-theme-class', product: product_obj
  endcapture
  assign product_theme_class = product_theme_class | strip
%}

<article class="testimonial-grid__item-video {{ product_theme_class }}">
  {% if entry.type == 'video' or entry.type.value == 'video' %}
    {% render 'testimonial-video', video: entry.video %}
  {% endif %}

  {% if product_obj %}
    <div class="px-6 w-full flex justify-center">
      <a
        href="{{ product_obj.url }}"
        class="relative left-1/2 -translate-x-1/2 mt-[-1rem] mb-4 flex justify-center items-center [background:var(--product-bg,white)] text-[var(--color-foreground-default)] px-5 py-2 rounded-3xl no-underline gap-4 min-w-[220px] text-base max-w-full flex-shrink-0 hover:scale-102 transition-all duration-300"
      >
        <div class="size-20 rounded-xl overflow-hidden flex-shrink-0">
          {{ product_obj.featured_image | image_url: width: 120, height: 120 | image_tag: class: 'w-full h-full object-cover' }}
        </div>
        <span class="font-medium leading-snug line-clamp-2">
          {{- product_obj.title -}}
        </span>
        {{ 'icon-chevron-right.svg' | inline_asset_content }}
      </a>
    </div>
  {% endif %}
</article>
