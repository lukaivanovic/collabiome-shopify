{% doc %}
  Product Upsell Card

  Renders a single upsell product card with image, description, and add to cart button.

  @param {product} product - Product object to display (required)
  @param {string} title - Upsell product title to display (required)
  @param {string} description - Upsell product description to display (required)
  @param {image} image - Upsell product image to display (required)
  @param {number} step_index - Position of the product within the flow (default: 1)
{% enddoc %}

<div class="product-upsell-card flex h-full flex-col items-center">
  <div class="relative w-full bg-white rounded-t-full p-4 pb-6 shrink-0">
    <div class="relative aspect-square overflow-hidden rounded-full bg-gray-100">
      {% render 'image', image: image, class: 'absolute inset-0 h-full w-full object-cover' %}
    </div>

    <div class="absolute size-8 flex items-center justify-center -bottom-3 left-1/2 -translate-x-1/2 rounded-full [background:var(--product-button-background)] text-[var(--product-button-text-color)] font-medium">
      {{ step_index }}
    </div>
  </div>

  <div class="w-full flex flex-1 flex-col gap-4 bg-white rounded-b-xl p-4 pt-6 text-center">
    <div class="min-h-0">
      <h3 class="mb-2 text-xl font-semibold line-clamp-2">{{ title }}</h3>

      <p class="text-sm text-gray-600 line-clamp-3">
        {{ description }}
      </p>
    </div>

    <div class="mt-auto border-t border-neutral-100 pt-4">
      {% render 'product-card-mini',
        product: product,
        show_dynamic_checkout: false,
        hide_buy_form: true,
        clamp_title: true
      %}
    </div>
  </div>
</div>
