{% doc %}
  Header Mega Menu - Cosmetics

  Renders a custom mega menu panel for the cosmetics collection with hardcoded filter links.

  @example
  {% content_for 'block', type: 'header-mega-menu-cosmetics', id: 'mega-menu-cosmetics' %}
{% enddoc %}

{% liquid
  # Prefer explicit cosmetics collection handles, fall back if needed
  assign cosmetics_collection = collections.kozmetika

  # Use featured_products metafield when available, otherwise fall back to collection products
  assign featured_products = blank

  if cosmetics_collection.metafields.custom and cosmetics_collection.metafields.custom.featured_products
    assign featured_products = cosmetics_collection.metafields.custom.featured_products.value
  endif

  if featured_products == blank
    assign featured_products = cosmetics_collection.products
  endif

  unless cosmetics_collection and cosmetics_collection != empty
    break
  endunless
%}

<div
  class="mega-menu-panel pointer-events-none absolute left-0 top-[calc(100%-16px)] w-full aria-[hidden=false]:pointer-events-auto"
  data-mega-menu-panel="{{ cosmetics_collection.handle }}"
  aria-hidden="true"
  {{ block.shopify_attributes }}
>
  <div class="container py-3">
    <div
      class="mega-menu-card rounded-2xl border border-black/12 bg-[var(--color-background-default)]"
      data-mega-menu-card
    >
      <div class="flex flex-row gap-8 p-8">
        <div class="flex flex-row gap-20 min-w-150">
          {% comment %} Tip kože {% endcomment %}
          <div class="flex flex-col gap-3 ">
            <p class="m-0 text-xs font-medium uppercase tracking-wide text-primary/70">Tip kože</p>
            <ul class="m-0 list-none space-y-1 p-0">
              <li>
                <a
                  href="{{ cosmetics_collection.url }}?filter.p.m.custom.skin_type=dry"
                  class="text-sm text-primary transition-colors duration-200 hover:text-primary/80 no-underline"
                >
                  Suha
                </a>
              </li>
              <li>
                <a
                  href="{{ cosmetics_collection.url }}?filter.p.m.custom.skin_type=oily"
                  class="text-sm text-primary transition-colors duration-200 hover:text-primary/80 no-underline"
                >
                  Masna
                </a>
              </li>
              <li>
                <a
                  href="{{ cosmetics_collection.url }}?filter.p.m.custom.skin_type=combination"
                  class="text-sm text-primary transition-colors duration-200 hover:text-primary/80 no-underline"
                >
                  Mješovita
                </a>
              </li>
              <li>
                <a
                  href="{{ cosmetics_collection.url }}?filter.p.m.custom.skin_type=normal"
                  class="text-sm text-primary transition-colors duration-200 hover:text-primary/80 no-underline"
                >
                  Normalna
                </a>
              </li>
              <li>
                <a
                  href="{{ cosmetics_collection.url }}?filter.p.m.custom.skin_type=sensitive"
                  class="text-sm text-primary transition-colors duration-200 hover:text-primary/80 no-underline"
                >
                  Osjetljiva
                </a>
              </li>
            </ul>
          </div>

          {% comment %} Dio rutine {% endcomment %}
          <div class="flex flex-col gap-3">
            <p class="m-0 text-xs font-medium uppercase tracking-wide text-primary/70">Dio rutine</p>
            <ul class="m-0 list-none space-y-1 p-0">
              <li>
                <a
                  href="{{ cosmetics_collection.url }}?filter.p.m.custom.routine_part=cleanser"
                  class="text-sm text-primary transition-colors duration-200 hover:text-primary/80 no-underline"
                >
                  Čišćenje lica
                </a>
              </li>
              <li>
                <a
                  href="{{ cosmetics_collection.url }}?filter.p.m.custom.routine_part=exfoliation"
                  class="text-sm text-primary transition-colors duration-200 hover:text-primary/80 no-underline"
                >
                  Eksfolacija lica
                </a>
              </li>
              <li>
                <a
                  href="{{ cosmetics_collection.url }}?filter.p.m.custom.routine_part=serum"
                  class="text-sm text-primary transition-colors duration-200 hover:text-primary/80 no-underline"
                >
                  Serumi
                </a>
              </li>
              <li>
                <a
                  href="{{ cosmetics_collection.url }}?filter.p.m.custom.routine_part=moisturizer"
                  class="text-sm text-primary transition-colors duration-200 hover:text-primary/80 no-underline"
                >
                  Hidratantne kreme
                </a>
              </li>
              <li>
                <a
                  href="{{ cosmetics_collection.url }}?filter.p.m.custom.routine_part=night_care"
                  class="text-sm text-primary transition-colors duration-200 hover:text-primary/80 no-underline"
                >
                  Noćna njega
                </a>
              </li>
            </ul>
          </div>

          {% comment %} Kožni problemi {% endcomment %}
          <div class="flex flex-col gap-3 ">
            <p class="m-0 text-xs font-medium uppercase tracking-wide text-primary/70">Kožni problemi</p>
            <ul class="m-0 list-none space-y-1 p-0">
              <li>
                <a
                  href="{{ cosmetics_collection.url }}?filter.p.m.custom.problem_solution=acne"
                  class="text-sm text-primary transition-colors duration-200 hover:text-primary/80 no-underline"
                >
                  Nečista koža
                </a>
              </li>
              <li>
                <a
                  href="{{ cosmetics_collection.url }}?filter.p.m.custom.problem_solution=redness"
                  class="text-sm text-primary transition-colors duration-200 hover:text-primary/80 no-underline"
                >
                  Crvenilo i nadraženost
                </a>
              </li>
              <li>
                <a
                  href="{{ cosmetics_collection.url }}?filter.p.m.custom.problem_solution=clogged_pores"
                  class="text-sm text-primary transition-colors duration-200 hover:text-primary/80 no-underline"
                >
                  Začepljene pore
                </a>
              </li>
              <li>
                <a
                  href="{{ cosmetics_collection.url }}?filter.p.m.custom.problem_solution=enlarged_pores"
                  class="text-sm text-primary transition-colors duration-200 hover:text-primary/80 no-underline"
                >
                  Proširene pore
                </a>
              </li>
              <li>
                <a
                  href="{{ cosmetics_collection.url }}?filter.p.m.custom.problem_solution=discoloration"
                  class="text-sm text-primary transition-colors duration-200 hover:text-primary/80 no-underline"
                >
                  Diskoloracija
                </a>
              </li>
              <li>
                <a
                  href="{{ cosmetics_collection.url }}?filter.p.m.custom.problem_solution=aging"
                  class="text-sm text-primary transition-colors duration-200 hover:text-primary/80 no-underline"
                >
                  Bore
                </a>
              </li>
            </ul>
          </div>
        </div>

        <div class="ml-auto flex flex-row justify-end w-full min-w-150 gap-3">
          {% content_for 'blocks' %}
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Mega menu - Cosmetics",
  "blocks": [
    {
      "type": "promo-banner"
    }
  ],
  "settings": [],
  "presets": [
    {
      "name": "Mega menu - Cosmetics"
    }
  ]
}
{% endschema %}
